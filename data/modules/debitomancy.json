{
    "module": "debitomancy",
    "author": "wunarg, draxius",
    "data": {
        "skills": [
            {
                "id": "debitomancy",
                "name": "债务魔法",
                "require": "(g.debt>=10||g.shopkeeping>=6)&&g.tier1>0",
                "desc": "掌控所欠之物，以及欠债之人",
                "level": 5,
                "buy": {
                    "arcana": 40
                },
                "run": {
                    "stamina": 0.3,
                    "debt": 1
                },
                "mod": {
                    "research.max": 5,
                    "debt.max": 100
                }
            }
        ],
        "tasks": [
            {
                "id": "burningrecords",
                "name": "永燃记录",
                "actname": "焚烧记录",
                "desc": "你累积的债务记录，永恒燃烧，不断抹去",
                "flavor": "无尽卷轴的邪恶对应物。",
                "require": "g.debitomancy>=6&&g.firelore>=7&&g.languages>=7",
                "max": 1,
                "length": 120,
                "cost": {
                    "codices": 2
                },
                "run": {
                    "stamina": 2,
                    "scrolls": 0.25,
                    "fire": 0.5
                },
                "effect": {
                    "debitomancy.exp": "g.debitomancy.rate*0.2"
                },
                "mod": {
                    "debt.convert.output.effect.debt": -0.00015,
                    "debitomancy.max": 2,
                    "debitomancy.rate": 0.2,
                    "firelore.max": 1,
                    "firelore.rate": 0.1
                },
                "group": "debt"
            },
            {
                "id": "borrowmoney",
                "name": "借钱",
                "verb": "borrowing",
                "desc": "向熟人借些快钱",
                "require": "g.shopkeeping>=6||g.debitomancy>=1",
                "perpetual": true,
                "run": {
                    "debt": 20
                },
                "effect": {
                    "gold": 20,
                    "debitomancy.exp": "g.debitomancy.rate*0.2"
                },
                "group": "affluence"
            },
            {
                "id": "prisonlabor",
                "name": "监狱劳役",
                "verb": "cracking rocks",
                "desc": "通过体力劳动偿还债务，这对任何有自尊的巫师来说都是可怕的念头",
                "flavor": "时间魔法事件后，禁止使用魔法。",
                "require": "g.debitomancy>=1",
                "need": "g.debt>=1",
                "perpetual": true,
                "length": 20,
                "run": {
                    "stamina": 1,
                    "hp": 0.1
                },
                "result": {
                    "debt": -10
                },
                "at": {
                    "20": {
                        "run.stamina": -0.2
                    },
                    "50": {
                        "result.debt": -5
                    }
                },
                "group": "affluence"
            },
            {
                "id": "encase_debt",
                "name": "扩充账簿",
                "verb": "inking papers",
                "desc": "也许再多一套账簿就能迷惑收债人？",
                "flavor": "这笔账目似乎永无止境……而且越来越贵！",
                "tags": "t_languagework",
                "require": "g.debitomancy>=10",
                "perpetual": true,
                "length": 36,
                "max": 100,
                "cost": {
                    "scrolls": 5,
                    "codices": 5,
                    "tomes": 5
                },
                "run": {
                    "stamina": 1,
                    "research": 20
                },
                "mod": {
                    "debitomancy.max": "0.05//100/20",
                    "encase_debt.result.debt": -1
                },
                "effect": {
                    "debt": -1
                },
                "result": {
                    "debt": -1
                },
                "at": {
                    "10": {
                        "effect.debt": -1
                    },
                    "20": {
                        "effect.debt": -1
                    },
                    "30": {
                        "effect.debt": -1
                    },
                    "40": {
                        "effect.debt": -1
                    }
                },
                "group": "affluence"
            },
            {
                "id": "lendgold",
                "name": "出借黄金",
                "verb": "moneylending",
                "desc": "将黄金借给贫困和愚蠢之人",
                "tags": "t_languagework",
                "require": "g.debitomancy>=3",
                "length": 20,
                "cost": {
                    "gold": 200
                },
                "run": {
                    "stamina": 1
                },
                "result": {
                    "gold": "150~300"
                },
                "at": {
                    "20": {
                        "length": -2,
                        "run.stamina": -0.2
                    }
                },
                "group": "affluence"
            }
        ],
        "upgrades": [
            {
                "id": "moredebt",
                "name": "更多债主",
                "desc": "找到更多愿意借钱给你的人",
                "require": "g.debitomancy>=2",
                "max": 5,
                "cost": {
                    "research": 1000,
                    "gold": 500,
                    "gems": 10
                },
                "mod": {
                    "debt.max": 500,
                    "debitomancy.max": 1,
                    "borrowmoney.run.debt": 10,
                    "borrowmoney.effect.gold": 10
                },
                "group": "debt"
            },
            {
                "id": "creativeaccounting",
                "name": "创意会计",
                "desc": "这里那里的一些四舍五入误差",
                "require": "g.debitomancy>=4",
                "max": 1,
                "cost": {
                    "research": 100,
                    "gold": 500,
                    "scrolls": 40
                },
                "mod": {
                    "debt.convert.output.effect.debt": -0.0001
                },
                "group": "debt"
            },
            {
                "id": "cheaperdebt",
                "name": "更好的债主",
                "desc": "经过足够的研究，你可以找到利率没那么离谱的放贷人",
                "require": "g.debitomancy>=6",
                "max": 1,
                "cost": {
                    "research": 2000
                },
                "mod": {
                    "debt.convert.input.gold": -0.0001,
                    "debitomancy.max": 1
                },
                "group": "debt"
            },
            {
                "id": "debttravel",
                "name": "债务人的旅行",
                "desc": "如果你走得足够远，他们肯定就找不到你了",
                "require": "g.debitomancy>=3&&g.a_travel>0",
                "max": 1,
                "cost": {
                    "research": 500
                },
                "mod": {
                    "a_travel.effect.debt": -0.5,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "debttrickery",
                "name": "债务人的诡计",
                "desc": "快钱和更快的手段让你的债务更快消失。",
                "flavor": "假名，假想法，只要能逃避债务，什么都行",
                "warn": true,
                "warnMsg": "Debt and gold decreases from removing debt will both be faster with this upgrade",
                "require": "g.debitomancy>=5&&g.trickery>=2",
                "max": 1,
                "cost": {
                    "research": 500
                },
                "mod": {
                    "trickery.mod.debt.convert.output.effect.debt": -0.0001,
                    "trickery.mod.debt.convert.input.gold": 0.0001,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "debtgeomancy",
                "name": "附魔镣铐",
                "desc": "偷偷将土系魔法附魔带入监狱劳改营，让工作轻松一点",
                "group": "debt",
                "require": "g.earthlore>=7&&g.debitomancy>=6",
                "max": 1,
                "cost": {
                    "earthgem": 2,
                    "research": 500
                },
                "mod": {
                    "prisonlabor.run.stamina": -0.5,
                    "prisonlabor.result.debt": -5,
                    "debitomancy.max": 0.5
                }
            },
            {
                "id": "debtmurder",
                "name": "债务人的谋杀",
                "desc": "你不需要向尸体偿还债务",
                "group": "debt",
                "require": "g.debitomancy>=2&&g.murder>0",
                "max": 1,
                "cost": {
                    "research": 350
                },
                "result": {
                    "evilamt": 20
                },
                "mod": {
                    "murder.result.debt": -2,
                    "debitomancy.max": 0.5
                }
            },
            {
                "id": "debtdemon",
                "name": "恶魔放贷",
                "desc": "替代抵押品完全可以接受",
                "flavor": "我向他索要的这磅肉，代价高昂；它是我的，我一定要得到它。",
                "require": "g.debitomancy>=2&&g.demonology>=7",
                "max": 1,
                "cost": {
                    "research": 1200
                },
                "mod": {
                    "lendgold.result.bloodgem": 0.2,
                    "debt.max": 250,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "debtvirtuous",
                "name": "高尚信誉",
                "desc": "当人们信任你时，债务偿还可以稍微放缓",
                "need": "(g.virtue - g.evilamt)>=50",
                "needtext": "Must have 50 more virtue than evil",
                "require": "g.debitomancy>=4&&g.evil2==0&&g.good1==1",
                "max": 1,
                "cost": {
                    "research": 500,
                    "gold": 1000
                },
                "mod": {
                    "debt.convert.input.gold": -0.0002,
                    "debt.max": 250,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "curselendgold",
                "name": "诅咒黄金",
                "desc": "用可怕的诅咒标记你的黄金，降临那些不向你偿还债务的人",
                "require": "g.debitomancy>=4&&g.shadowlore>=6",
                "max": 1,
                "cost": {
                    "research": 1000,
                    "gold": 300,
                    "shadowgem": 5
                },
                "mod": {
                    "lendgold.result.gold.min": 50,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "planarlendgold",
                "name": "位面借贷",
                "desc": "将你的放贷服务扩展到其他位面",
                "require": "g.debitomancy>=5&&g.planeslore>=10",
                "max": 1,
                "cost": {
                    "research": 2000,
                    "gold": 1000,
                    "managem": 5
                },
                "mod": {
                    "lendgold.result.gold.max": 250,
                    "lendgold.result.gold.min": 200,
                    "lendgold.cost.gold": 200,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "animallendgold",
                "name": "熊类强制执行条款",
                "desc": "根据标准借贷合同第3:3:63条，未能按时还款可能导致由灰熊（ursa horribilis）执行的惩罚性赔偿。",
                "flavor": "债务人逃离，被熊追赶。",
                "require": "g.debitomancy>=9&&g.animals>=12",
                "max": 1,
                "cost": {
                    "research": 4000,
                    "gold": 3000,
                    "naturegem": 10
                },
                "mod": {
                    "lendgold.result.gold.max": 150,
                    "lendgold.cost.herbs": 1,
                    "debitomancy.max": 0.5
                },
                "group": "debt"
            },
            {
                "id": "debtrevelation",
                "name": "债务人的启示",
                "desc": "当你一无所有时会发生什么",
                "require": "g.debitomancy>=5&&g.voidlore>0",
                "warn": true,
                "max": 1,
                "cost": {
                    "research": 10000,
                    "managem": 20,
                    "debt": 100
                },
                "mod": {
                    "debt.rate": 0.1,
                    "debt.mod.research.rate": 0.01
                },
                "convert": {
                    "input": {
                        "gold": 0.01
                    },
                    "output": {
                        "effect": {
                            "debt": -0.01
                        }
                    }
                },
                "group": "debt"
            },
            {
                "id": "debtrevelation2",
                "name": "债务人的顿悟",
                "desc": "想象化为实质",
                "require": "g.debtrevelation>0",
                "need": "g.debt>=2500",
                "needtext": "Must have 2500 or more debt",
                "max": 1,
                "mod": {
                    "voidlore.max": 1
                },
                "group": "debt"
            },
            {
                "id": "debtrevelation3",
                "name": "债务人的开悟",
                "desc": "一个颠倒的世界在虚无的另一端显现",
                "require": "g.debtrevelation2>0",
                "need": "g.debt>=5000",
                "needtext": "Must have 5000 or more debt",
                "max": 1,
                "mod": {
                    "voidlore.max": 1
                },
                "group": "debt"
            },
            {
                "id": "ashdebtrevelation1",
                "name": "灰烬真理",
                "desc": "在烧焦的账簿中，你意识到物质财富的真正平庸。",
                "require": "g.debtrevelation>0&&g.encase_debt>=10",
                "need": "g.encase_debt>=50",
                "needtext": "Must have expanded accounting logs 50 or more times.",
                "max": 1,
                "mod": {
                    "voidlore.max": 1
                },
                "group": "debt"
            },
            {
                "id": "ashdebtrevelation2",
                "name": "灰烬极乐",
                "desc": "当你销毁所有关于你自己的记录时，你将自己从物质存在的枷锁中解放出来。",
                "require": "g.ashdebtrevelation1>0",
                "need": "g.encase_debt>=100",
                "needtext": "Must have expanded accounting logs 100 or more times.",
                "max": 1,
                "mod": {
                    "voidlore.max": 1
                },
                "group": "debt"
            }
        ],
        "furniture": [
            {
                "id": "debttransmuter",
                "name": "债务转化器",
                "desc": "将债务和黄金化为乌有",
                "require": "g.debitomancy>=5&&g.voidlore>=3&&g.debtrevelation>0",
                "max": 3,
                "cost": {
                    "gold": 1000,
                    "gems": 40,
                    "arcana": 5,
                    "managem": 10
                },
                "convert": {
                    "input": {
                        "gold": 0.03,
                        "debt": -0.03
                    },
                    "output": {
                        "mod": {
                            "void.rate": 0.03
                        }
                    }
                },
                "mod": {
                    "space": 3,
                    "debitomancy.mod.debt.max": 3
                }
            }
        ],
        "resources": [
            {
                "id": "debt",
                "name": "债务",
                "group": "adversities",
                "desc": "债务正在啃噬着你",
                "require": "g.debt>=1",
                "max": 500,
                "sortOrder": 805,
                "reverse": true,
                "convert": {
                    "input": {
                        "gold": 0.002
                    },
                    "output": {
                        "effect": {
                            "debt": -0.001
                        }
                    }
                }
            }
        ],
        "spells": [
            {
                "id": "mk_loan_shark",
                "name": "召唤高利贷者",
                "desc": "召唤一名高利贷者来追查你的债务人。附带一套西装和乡村俱乐部会员资格。",
                "sortOrder": 1799,
                "level": 7,
                "school": "summoning",
                "keywords": {
                    "type": [
                        "summon"
                    ],
                    "target": [
                        "ally"
                    ],
                    "targets": [
                        "single"
                    ],
                    "delivery": [
                        "instant"
                    ]
                },
                "require": "g.debitomancy>=10&&g.tier2>0",
                "buy": {
                    "research": 4000,
                    "gold": 2500,
                    "tomes": 10
                },
                "cost": {
                    "debt": 250
                },
                "cd": 5,
                "summon": [
                    {
                        "id": "sum_loan_shark",
                        "count": 1,
                        "max": 3
                    }
                ]
            },
            {
                "id": "mon_pilfer_gold",
                "name": "盗窃",
                "level": 3,
                "school": "arcane",
                "keywords": {
                    "target": [
                        "enemy"
                    ],
                    "targets": [
                        "single"
                    ],
                    "delivery": [
                        "instant"
                    ],
                    "special": [
                        "resource"
                    ]
                },
                "require": "g.lore>999",
                "attack": {
                    "targetspec": {
                        "notaffectedby": {
                            "condition": [
                                "pilfered_dot"
                            ],
                            "strict": true,
                            "conditiontext": "having their valuables stolen"
                        }
                    },
                    "dot": {
                        "id": "pilfered_dot",
                        "kind": "chaos",
                        "name": "失窃的贵重物品"
                    },
                    "damage": "t.hp.max/100",
                    "acquire": {
                        "gold": "(10+Math.pow(t.level,1.3))*(0.8+0.5*Math.random())"
                    }
                }
            }
        ],
        "monsters": [
            {
                "id": "sum_loan_shark",
                "name": "高利贷者",
                "tags": "t_summon",
                "kind": "demon",
                "level": 20,
                "desc": "它能从七里之外的水中闻到绝望的气息。",
                "hp": 73,
                "noproc": true,
                "defense": 30,
                "spells": "mon_pilfer_gold,perfectstrike",
                "resist": {
                    "water": 50
                },
                "attack": {
                    "name": "啃咬",
                    "kind": "pierce",
                    "damage": "10~15",
                    "leech": 0.5,
                    "dot": {
                        "id": "bleed",
                        "damage": "1~5",
                        "duration": 10
                    }
                }
            }
        ]
    }
}